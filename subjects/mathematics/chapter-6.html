<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Coordinate Plane - Interactive graphing, plotting points, and coordinate geometry for 5th grade">
    <meta name="keywords" content="5th grade, coordinate plane, graphing, plotting points, x-axis, y-axis, coordinates, mathematics">
    <title>Coordinate Plane - 5th Grade Mathematics | Learning Platform</title>
    
    <link rel="stylesheet" href="../../css/main.css">
    <link rel="stylesheet" href="../../css/responsive.css">
    
    <style>
        .coordinate-grid {
            width: 400px;
            height: 400px;
            background: white;
            border: 2px solid var(--primary-color);
            position: relative;
            margin: var(--spacing-lg) auto;
            cursor: crosshair;
        }
        
        .grid-line {
            position: absolute;
            background-color: #e0e0e0;
        }
        
        .axis-line {
            position: absolute;
            background-color: var(--primary-color);
        }
        
        .coordinate-point {
            width: 8px;
            height: 8px;
            background-color: var(--secondary-color);
            border-radius: 50%;
            position: absolute;
            transform: translate(-50%, -50%);
            cursor: pointer;
        }
        
        .point-label {
            position: absolute;
            font-size: 12px;
            font-weight: bold;
            color: var(--primary-color);
        }
    </style>
</head>
<body>
    <div id="header-container"></div>
    <main class="chapter-container" id="main-content">
        <div class="chapter-header">
            <div class="chapter-number">Chapter 6</div>
            <h1 class="chapter-title">Coordinate Plane</h1>
            <p class="chapter-description">Master plotting points, understanding coordinates, and graphing relationships.</p>
        </div>
        
        <div class="lesson-content">
            <section class="lesson-section">
                <h2>üìç Interactive Coordinate Plane</h2>
                <p>Click anywhere on the grid to plot points and explore coordinates!</p>
                
                <div class="coordinate-grid" onclick="plotPoint(event)"></div>
                
                <div class="activity-card">
                    <h4>üéØ Coordinate Challenges</h4>
                    <button type="button" class="try-it-button" onclick="startTreasureHunt()">
                        üè¥‚Äç‚ò†Ô∏è Treasure Hunt Game
                    </button>
                    <button type="button" class="try-it-button" onclick="startShapeBuilder()">
                        üî∑ Shape Builder
                    </button>
                </div>
            </section>
            
            <section class="lesson-section">
                <h2>üó∫Ô∏è Real-World Applications</h2>
                <div class="fraction-grid">
                    <div class="fraction-card" onclick="startMapActivity()">
                        <h4>üó∫Ô∏è City Maps</h4>
                        <p>Navigate using coordinate addresses</p>
                    </div>
                    <div class="fraction-card" onclick="startGraphActivity()">
                        <h4>üìä Data Plotting</h4>
                        <p>Create graphs from real data</p>
                    </div>
                </div>
            </section>
        </div>
        
        <div class="chapter-navigation">
            <a href="chapter-5.html" class="nav-button" aria-label="Previous: Chapter 5">‚Üê Previous</a>
            <a href="chapter-7.html" class="nav-button" aria-label="Next: Chapter 7">Next ‚Üí</a>
        </div>
    </main>
    
    <div id="footer-container"></div>
    
    <script src="../../js/interactive.js" defer></script>
    <script src="../../js/gamification-system.js" defer></script>
    
    <script>
        const loadShared = () => {
            fetch('../shared/header.html').then(r=>r.text()).then(h=>document.getElementById('header-container').innerHTML=h);
            fetch('../shared/footer.html').then(r=>r.text()).then(h=>document.getElementById('footer-container').innerHTML=h);
        };
        document.readyState==='loading'?document.addEventListener('DOMContentLoaded',loadShared):loadShared();
        
        // Initialize coordinate plane
        document.addEventListener('DOMContentLoaded', function() {
            initializeGrid();
            if (window.GamificationSystem) {
                window.gamificationSystem = new GamificationSystem({ chapter: 'mathematics-6', subject: 'mathematics' });
            }
        });
        
        function initializeGrid() {
            const grid = document.querySelector('.coordinate-grid');
            grid.innerHTML = '';
            
            // Draw grid lines
            for (let i = 1; i < 10; i++) {
                const vLine = document.createElement('div');
                vLine.className = 'grid-line';
                vLine.style.cssText = `left: ${i * 40}px; top: 0; width: 1px; height: 100%;`;
                grid.appendChild(vLine);
                
                const hLine = document.createElement('div');
                hLine.className = 'grid-line';
                hLine.style.cssText = `left: 0; top: ${i * 40}px; width: 100%; height: 1px;`;
                grid.appendChild(hLine);
            }
            
            // Draw axes
            const xAxis = document.createElement('div');
            xAxis.className = 'axis-line';
            xAxis.style.cssText = `left: 0; top: 200px; width: 100%; height: 2px;`;
            grid.appendChild(xAxis);
            
            const yAxis = document.createElement('div');
            yAxis.className = 'axis-line';
            yAxis.style.cssText = `left: 200px; top: 0; width: 2px; height: 100%;`;
            grid.appendChild(yAxis);
        }
        
        function plotPoint(event) {
            const grid = event.currentTarget;
            const rect = grid.getBoundingClientRect();
            const x = event.clientX - rect.left;
            const y = event.clientY - rect.top;
            
            // Convert to coordinate system
            const coordX = Math.round((x - 200) / 40);
            const coordY = Math.round((200 - y) / 40);
            
            const point = document.createElement('div');
            point.className = 'coordinate-point';
            point.style.left = (coordX * 40 + 200) + 'px';
            point.style.top = (200 - coordY * 40) + 'px';
            
            const label = document.createElement('div');
            label.className = 'point-label';
            label.textContent = `(${coordX}, ${coordY})`;
            label.style.left = (coordX * 40 + 210) + 'px';
            label.style.top = (200 - coordY * 40 - 20) + 'px';
            
            grid.appendChild(point);
            grid.appendChild(label);
            
            showNotification(`üìç Plotted point (${coordX}, ${coordY})`, 'success');
            if (window.gamificationSystem) {
                window.gamificationSystem.awardPoints('point_plotted', 1);
            }
        }
        
        function startTreasureHunt() {
            showNotification('üè¥‚Äç‚ò†Ô∏è Treasure Hunt: Find the treasure using coordinate clues!', 'info');
            if (window.gamificationSystem) window.gamificationSystem.awardPoints('activity_started', 5);
        }
        
        function startShapeBuilder() {
            showNotification('üî∑ Shape Builder: Create geometric shapes by plotting points!', 'info');
            if (window.gamificationSystem) window.gamificationSystem.awardPoints('activity_started', 5);
        }
        
        function startMapActivity() {
            showNotification('üó∫Ô∏è City Maps: Navigate using coordinate addresses!', 'info');
            if (window.gamificationSystem) window.gamificationSystem.awardPoints('map_activity', 5);
        }
        
        function startGraphActivity() {
            showNotification('üìä Data Plotting: Create graphs from real data!', 'info');
            if (window.gamificationSystem) window.gamificationSystem.awardPoints('graph_activity', 5);
        }
        
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed; top: 20px; right: 20px; z-index: 2000;
                padding: 1rem 1.5rem; border-radius: 0.5rem; color: white;
                font-weight: bold; max-width: 300px;
                background: ${type === 'success' ? 'var(--success-color)' : 'var(--primary-color)'};
            `;
            notification.textContent = message;
            document.body.appendChild(notification);
            setTimeout(() => notification.remove(), 3000);
        }
    </script>
</body>
</html>