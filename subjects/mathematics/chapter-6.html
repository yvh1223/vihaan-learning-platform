<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Coordinate Plane - Interactive graphing, plotting points, and coordinate geometry for 5th grade">
    <meta name="keywords" content="5th grade, coordinate plane, graphing, plotting points, x-axis, y-axis, coordinates, mathematics">
    <title>Coordinate Plane - 5th Grade Mathematics | Learning Platform</title>
    
    <link rel="stylesheet" href="../../css/main.css">
    <link rel="stylesheet" href="../../css/responsive.css">
    
    <style>
        .coordinate-grid {
            width: 400px;
            height: 400px;
            background: white;
            border: 2px solid var(--primary-color);
            position: relative;
            margin: var(--spacing-lg) auto;
            cursor: crosshair;
        }
        
        .grid-line {
            position: absolute;
            background-color: #e0e0e0;
        }
        
        .axis-line {
            position: absolute;
            background-color: var(--primary-color);
        }
        
        .coordinate-point {
            width: 8px;
            height: 8px;
            background-color: var(--secondary-color);
            border-radius: 50%;
            position: absolute;
            transform: translate(-50%, -50%);
            cursor: pointer;
        }
        
        .point-label {
            position: absolute;
            font-size: 12px;
            font-weight: bold;
            color: var(--primary-color);
        }

        .axis-label {
            position: absolute;
            font-size: 12px;
            font-weight: 700;
            color: var(--primary-color);
        }

        .tick-label {
            position: absolute;
            font-size: 11px;
            color: var(--text-secondary);
        }

        .vocab-card {
            background-color: var(--bg-card);
            padding: var(--spacing-lg);
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-sm);
            margin: var(--spacing-lg) 0;
        }

        .step-list {
            background-color: var(--bg-secondary);
            padding: var(--spacing-lg);
            border-radius: var(--radius-md);
            margin: var(--spacing-lg) 0;
        }

        .practice-points {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
            gap: var(--spacing-md);
            margin: var(--spacing-lg) 0;
        }

        .practice-card {
            background-color: var(--bg-card);
            padding: var(--spacing-md);
            border-radius: var(--radius-md);
            text-align: center;
            box-shadow: var(--shadow-sm);
        }

        .concept-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: var(--spacing-lg);
            margin: var(--spacing-lg) 0;
        }

        .concept-card {
            background-color: var(--bg-card);
            padding: var(--spacing-lg);
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-sm);
        }

        .practice-lab {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: var(--spacing-lg);
            margin: var(--spacing-lg) 0;
        }

        .practice-task {
            background-color: var(--bg-secondary);
            padding: var(--spacing-lg);
            border-radius: var(--radius-md);
            border: 2px solid transparent;
        }

        .practice-task.correct {
            border-color: var(--success-color);
            background-color: rgba(var(--success-color-rgb), 0.08);
        }

        .practice-task.incorrect {
            border-color: var(--accent-color);
            background-color: rgba(255, 99, 71, 0.08);
        }

        .input-row {
            display: flex;
            gap: var(--spacing-sm);
            align-items: center;
            justify-content: center;
            margin: var(--spacing-md) 0;
            flex-wrap: wrap;
        }

        .input-field {
            width: 70px;
            padding: var(--spacing-xs) var(--spacing-sm);
            border: 1px solid var(--bg-accent);
            border-radius: var(--radius-sm);
            font-size: var(--font-size-sm);
            text-align: center;
        }

        .answer-feedback {
            margin-top: var(--spacing-sm);
            font-weight: 600;
            color: var(--text-secondary);
        }

        .quick-check {
            background-color: var(--bg-card);
            padding: var(--spacing-lg);
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-sm);
            margin: var(--spacing-lg) 0;
        }
    </style>
</head>
<body>
    <div id="header-container"></div>
    <main class="chapter-container" id="main-content">
        <div class="chapter-header">
            <div class="chapter-number">Chapter 6</div>
            <h1 class="chapter-title">Coordinate Plane</h1>
            <p class="chapter-description">Master plotting points, understanding coordinates, and graphing relationships.</p>
        </div>
        
        <div class="lesson-content">
            <section class="lesson-section">
                <h2>üß≠ Coordinate Plane Basics</h2>
                <p>The coordinate plane is a map made of two number lines that cross.</p>
                <div class="concept-grid">
                    <div class="concept-card">
                        <h4>Learning Goals</h4>
                        <ul>
                            <li>Identify the x-axis, y-axis, and origin.</li>
                            <li>Plot and read ordered pairs (x, y).</li>
                            <li>Describe locations using directions and distance.</li>
                        </ul>
                    </div>
                    <div class="concept-card">
                        <h4>Key Parts</h4>
                        <ul>
                            <li><strong>Origin:</strong> (0, 0)</li>
                            <li><strong>x-axis:</strong> left ‚Üî right</li>
                            <li><strong>y-axis:</strong> down ‚Üï up</li>
                            <li><strong>Scale:</strong> Each grid step is 1 unit</li>
                        </ul>
                    </div>
                    <div class="concept-card">
                        <h4>Quadrants (Extension)</h4>
                        <p>Quadrants are the four regions made by the axes.</p>
                        <ul>
                            <li>Quadrant I: (+, +)</li>
                            <li>Quadrant II: (‚àí, +)</li>
                            <li>Quadrant III: (‚àí, ‚àí)</li>
                            <li>Quadrant IV: (+, ‚àí)</li>
                        </ul>
                    </div>
                </div>
            </section>

            <section class="lesson-section">
                <h2>üìç Interactive Coordinate Plane</h2>
                <p>Click anywhere on the grid to plot points and explore coordinates!</p>
                <div class="vocab-card">
                    <h4>Key Vocabulary</h4>
                    <ul>
                        <li><strong>Origin:</strong> (0, 0), where the axes cross.</li>
                        <li><strong>x-axis:</strong> The horizontal line.</li>
                        <li><strong>y-axis:</strong> The vertical line.</li>
                        <li><strong>Ordered pair:</strong> (x, y), where x comes first.</li>
                    </ul>
                </div>
                <div class="step-list">
                    <h4>How to Plot a Point</h4>
                    <ol>
                        <li>Start at the origin (0, 0).</li>
                        <li>Move <strong>left/right</strong> to the x-value.</li>
                        <li>Move <strong>up/down</strong> to the y-value.</li>
                    </ol>
                    <p><strong>Example:</strong> (3, ‚àí2) means 3 right, 2 down.</p>
                </div>
                
                <div class="coordinate-grid" onclick="plotPoint(event)"></div>
                
                <div class="activity-card">
                    <h4>üéØ Coordinate Challenges</h4>
                    <button type="button" class="try-it-button" onclick="startTreasureHunt()">
                        üè¥‚Äç‚ò†Ô∏è Treasure Hunt Game
                    </button>
                    <button type="button" class="try-it-button" onclick="startShapeBuilder()">
                        üî∑ Shape Builder
                    </button>
                    <button type="button" class="try-it-button" onclick="clearPlottedPoints()">
                        üßπ Clear Grid
                    </button>
                </div>
            </section>

            <section class="lesson-section">
                <h2>üß™ Coordinate Practice Lab</h2>
                <p>Read the clue, enter your answer, and check your work.</p>
                <div class="practice-lab">
                    <div class="practice-task" data-type="pair" data-expected="4,2">
                        <h4>Robot Moves</h4>
                        <p>Start at (0, 0). Move 4 right and 2 up.</p>
                        <div class="input-row">
                            <label>
                                x:
                                <input type="number" class="input-field coord-x" aria-label="x coordinate">
                            </label>
                            <label>
                                y:
                                <input type="number" class="input-field coord-y" aria-label="y coordinate">
                            </label>
                        </div>
                        <button type="button" class="try-it-button" onclick="checkPracticeAnswer(this)">Check</button>
                        <div class="answer-feedback" role="status"></div>
                    </div>
                    <div class="practice-task" data-type="pair" data-expected="-3,-1">
                        <h4>Treasure Clue</h4>
                        <p>Move 3 left and 1 down from the origin.</p>
                        <div class="input-row">
                            <label>
                                x:
                                <input type="number" class="input-field coord-x" aria-label="x coordinate">
                            </label>
                            <label>
                                y:
                                <input type="number" class="input-field coord-y" aria-label="y coordinate">
                            </label>
                        </div>
                        <button type="button" class="try-it-button" onclick="checkPracticeAnswer(this)">Check</button>
                        <div class="answer-feedback" role="status"></div>
                    </div>
                    <div class="practice-task" data-type="number" data-expected="7">
                        <h4>Distance on a Line</h4>
                        <p>How far apart are (‚àí2, 4) and (5, 4) horizontally?</p>
                        <div class="input-row">
                            <input type="number" class="input-field single-answer" aria-label="distance answer">
                            <span>units</span>
                        </div>
                        <button type="button" class="try-it-button" onclick="checkPracticeAnswer(this)">Check</button>
                        <div class="answer-feedback" role="status"></div>
                    </div>
                </div>
            </section>
            
            <section class="lesson-section">
                <h2>üó∫Ô∏è Real-World Applications</h2>
                <p>Coordinates are used in maps, game boards, and data graphs.</p>
                <div class="practice-points">
                    <div class="practice-card">
                        <strong>Plot these points:</strong>
                        <div>A (2, 3)</div>
                        <div>B (‚àí1, 3)</div>
                        <div>C (‚àí1, ‚àí2)</div>
                        <div>D (2, ‚àí2)</div>
                    </div>
                    <div class="practice-card">
                        <strong>Challenge:</strong>
                        <div>What shape do A, B, C, D make?</div>
                        <details>
                            <summary>Answer</summary>
                            <div>Rectangle</div>
                        </details>
                    </div>
                </div>
                <div class="concept-grid">
                    <div class="concept-card">
                        <h4>Table to Graph</h4>
                        <p>Plot the points from this table.</p>
                        <ul>
                            <li>(1, 2)</li>
                            <li>(2, 4)</li>
                            <li>(3, 6)</li>
                            <li>(4, 8)</li>
                        </ul>
                        <p>What pattern do you notice?</p>
                    </div>
                    <div class="concept-card">
                        <h4>Coordinate Stories</h4>
                        <p>A delivery drone starts at (‚àí1, 1) and flies to (2, 1).</p>
                        <p>How far did it travel? Which direction?</p>
                        <details>
                            <summary>Answer</summary>
                            <div>3 units to the right.</div>
                        </details>
                    </div>
                </div>
                <div class="fraction-grid">
                    <div class="fraction-card" onclick="startMapActivity()">
                        <h4>üó∫Ô∏è City Maps</h4>
                        <p>Navigate using coordinate addresses</p>
                    </div>
                    <div class="fraction-card" onclick="startGraphActivity()">
                        <h4>üìä Data Plotting</h4>
                        <p>Create graphs from real data</p>
                    </div>
                </div>
            </section>

            <section class="lesson-section">
                <h2>‚úÖ Quick Check</h2>
                <div class="quick-check">
                    <ol>
                        <li>What ordered pair is 2 left and 5 up from the origin?</li>
                        <li>If x = 0, where is the point located?</li>
                        <li>Which quadrant has x positive and y negative?</li>
                    </ol>
                    <details>
                        <summary>Show answers</summary>
                        <ol>
                            <li>(‚àí2, 5)</li>
                            <li>On the y-axis.</li>
                            <li>Quadrant IV.</li>
                        </ol>
                    </details>
                </div>
            </section>
        </div>
        
        <div class="chapter-navigation">
            <a href="chapter-5.html" class="nav-button" aria-label="Previous: Chapter 5">‚Üê Previous</a>
            <a href="chapter-7.html" class="nav-button" aria-label="Next: Chapter 7">Next ‚Üí</a>
        </div>
    </main>
    
    <div id="footer-container"></div>
    
    <script src="../../js/interactive.js" defer></script>
    <script src="../../js/gamification-system.js" defer></script>
    
    <script>
        const loadShared = () => {
            fetch('../shared/header.html').then(r=>r.text()).then(h=>document.getElementById('header-container').innerHTML=h);
            fetch('../shared/footer.html').then(r=>r.text()).then(h=>document.getElementById('footer-container').innerHTML=h);
        };
        document.readyState==='loading'?document.addEventListener('DOMContentLoaded',loadShared):loadShared();
        
        // Initialize coordinate plane
        document.addEventListener('DOMContentLoaded', function() {
            initializeGrid();
            if (window.GamificationSystem) {
                window.gamificationSystem = new GamificationSystem({ chapter: 'mathematics-6', subject: 'mathematics' });
            }
        });
        
        function initializeGrid() {
            const grid = document.querySelector('.coordinate-grid');
            grid.innerHTML = '';
            
            // Draw grid lines
            for (let i = 1; i < 10; i++) {
                const vLine = document.createElement('div');
                vLine.className = 'grid-line';
                vLine.style.cssText = `left: ${i * 40}px; top: 0; width: 1px; height: 100%;`;
                grid.appendChild(vLine);
                
                const hLine = document.createElement('div');
                hLine.className = 'grid-line';
                hLine.style.cssText = `left: 0; top: ${i * 40}px; width: 100%; height: 1px;`;
                grid.appendChild(hLine);
            }
            
            // Draw axes
            const xAxis = document.createElement('div');
            xAxis.className = 'axis-line';
            xAxis.style.cssText = `left: 0; top: 200px; width: 100%; height: 2px;`;
            grid.appendChild(xAxis);
            
            const yAxis = document.createElement('div');
            yAxis.className = 'axis-line';
            yAxis.style.cssText = `left: 200px; top: 0; width: 2px; height: 100%;`;
            grid.appendChild(yAxis);

            const xLabel = document.createElement('div');
            xLabel.className = 'axis-label';
            xLabel.textContent = 'x';
            xLabel.style.cssText = 'left: 372px; top: 208px;';
            grid.appendChild(xLabel);

            const yLabel = document.createElement('div');
            yLabel.className = 'axis-label';
            yLabel.textContent = 'y';
            yLabel.style.cssText = 'left: 210px; top: 4px;';
            grid.appendChild(yLabel);

            for (let i = -5; i <= 5; i++) {
                if (i === 0) continue;
                const xTick = document.createElement('div');
                xTick.className = 'tick-label';
                xTick.textContent = i;
                xTick.style.cssText = `left: ${200 + i * 40 - 6}px; top: 208px;`;
                grid.appendChild(xTick);

                const yTick = document.createElement('div');
                yTick.className = 'tick-label';
                yTick.textContent = i;
                yTick.style.cssText = `left: 210px; top: ${200 - i * 40 - 6}px;`;
                grid.appendChild(yTick);
            }
        }
        
        function plotPoint(event) {
            const grid = event.currentTarget;
            const rect = grid.getBoundingClientRect();
            const x = event.clientX - rect.left;
            const y = event.clientY - rect.top;
            
            // Convert to coordinate system
            const coordX = Math.round((x - 200) / 40);
            const coordY = Math.round((200 - y) / 40);
            
            const point = document.createElement('div');
            point.className = 'coordinate-point';
            point.style.left = (coordX * 40 + 200) + 'px';
            point.style.top = (200 - coordY * 40) + 'px';
            
            const label = document.createElement('div');
            label.className = 'point-label';
            label.textContent = `(${coordX}, ${coordY})`;
            label.style.left = (coordX * 40 + 210) + 'px';
            label.style.top = (200 - coordY * 40 - 20) + 'px';
            
            grid.appendChild(point);
            grid.appendChild(label);
            
            showNotification(`üìç Plotted point (${coordX}, ${coordY})`, 'success');
            if (window.gamificationSystem) {
                window.gamificationSystem.awardPoints('point_plotted', 1);
            }
        }

        function clearPlottedPoints() {
            const grid = document.querySelector('.coordinate-grid');
            grid.querySelectorAll('.coordinate-point, .point-label').forEach((el) => el.remove());
            showNotification('üßπ Cleared plotted points.', 'success');
        }

        function checkPracticeAnswer(button) {
            const task = button.closest('.practice-task');
            const expected = task.dataset.expected.split(',').map((value) => value.trim());
            const type = task.dataset.type;
            let isCorrect = false;

            if (type === 'pair') {
                const xValue = task.querySelector('.coord-x').value.trim();
                const yValue = task.querySelector('.coord-y').value.trim();
                isCorrect = xValue !== '' && yValue !== '' && xValue === expected[0] && yValue === expected[1];
            } else {
                const value = task.querySelector('.single-answer').value.trim();
                isCorrect = value !== '' && value === expected[0];
            }

            task.classList.remove('correct', 'incorrect');
            task.classList.add(isCorrect ? 'correct' : 'incorrect');

            const feedback = task.querySelector('.answer-feedback');
            if (isCorrect) {
                feedback.textContent = 'Correct! Nice work.';
                if (window.gamificationSystem) window.gamificationSystem.awardPoints('practice_correct', 3);
            } else {
                feedback.textContent = `Not quite. Try again or check the hint: ${expected.join(', ')}`;
            }
        }
        
        function startTreasureHunt() {
            showNotification('üè¥‚Äç‚ò†Ô∏è Treasure Hunt: Find the treasure using coordinate clues!', 'info');
            if (window.gamificationSystem) window.gamificationSystem.awardPoints('activity_started', 5);
        }
        
        function startShapeBuilder() {
            showNotification('üî∑ Shape Builder: Create geometric shapes by plotting points!', 'info');
            if (window.gamificationSystem) window.gamificationSystem.awardPoints('activity_started', 5);
        }
        
        function startMapActivity() {
            showNotification('üó∫Ô∏è City Maps: Navigate using coordinate addresses!', 'info');
            if (window.gamificationSystem) window.gamificationSystem.awardPoints('map_activity', 5);
        }
        
        function startGraphActivity() {
            showNotification('üìä Data Plotting: Create graphs from real data!', 'info');
            if (window.gamificationSystem) window.gamificationSystem.awardPoints('graph_activity', 5);
        }
        
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed; top: 20px; right: 20px; z-index: 2000;
                padding: 1rem 1.5rem; border-radius: 0.5rem; color: white;
                font-weight: bold; max-width: 300px;
                background: ${type === 'success' ? 'var(--success-color)' : 'var(--primary-color)'};
            `;
            notification.textContent = message;
            document.body.appendChild(notification);
            setTimeout(() => notification.remove(), 3000);
        }
    </script>
</body>
</html>
