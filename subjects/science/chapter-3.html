<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Earth & Space - 5th grade science lesson exploring the solar system, Earth layers, weather, and the rock cycle.">
    <meta name="keywords" content="5th grade, science, earth, space, solar system, moon phases, weather, rock cycle, STAAR">
    <meta name="author" content="Yallappa H">
    <title>Earth & Space - 5th Grade Science</title>
    <link rel="stylesheet" href="../../css/main.css">
    <link rel="stylesheet" href="../../css/responsive.css">
</head>
<body>
    <div id="header-container"></div>
    <main class="chapter-container" id="main-content">
        <div class="chapter-header">
            <div class="chapter-number">Chapter 3</div>
            <h1 class="chapter-title">Earth & Space</h1>
            <p class="chapter-description">Explore our planet Earth, the solar system, and the wonders of space.</p>
        </div>
        <div class="lesson-content">
            <!-- Solar System Explorer -->
            <div class="experiment-station">
                <h3><span class="section-icon">üåü</span>Solar System Explorer</h3>
                <div class="solar-system-container">
                    <div class="solar-system" id="solar-system">
                        <div class="sun" id="sun">‚òÄÔ∏è</div>
                        <div class="orbit mercury-orbit">
                            <div class="planet mercury" id="mercury">‚òøÔ∏è</div>
                        </div>
                        <div class="orbit venus-orbit">
                            <div class="planet venus" id="venus">‚ôÄÔ∏è</div>
                        </div>
                        <div class="orbit earth-orbit">
                            <div class="planet earth" id="earth">üåç</div>
                            <div class="moon" id="moon">üåô</div>
                        </div>
                        <div class="orbit mars-orbit">
                            <div class="planet mars" id="mars">üî¥</div>
                        </div>
                        <div class="orbit jupiter-orbit">
                            <div class="planet jupiter" id="jupiter">ü™ê</div>
                        </div>
                        <div class="orbit saturn-orbit">
                            <div class="planet saturn" id="saturn">ü™ê</div>
                        </div>
                        <div class="orbit uranus-orbit">
                            <div class="planet uranus" id="uranus">üåÄ</div>
                        </div>
                        <div class="orbit neptune-orbit">
                            <div class="planet neptune" id="neptune">üîµ</div>
                        </div>
                    </div>
                    <div class="planet-info" id="planet-info">
                        <h4>Solar System Facts</h4>
                        <p>Click on any planet to learn more about it!</p>
                        <div class="planet-details" id="planet-details"></div>
                    </div>
                </div>
                <div class="solar-system-controls">
                    <button type="button" onclick="toggleAnimation()">‚èØÔ∏è Play/Pause</button>
                    <button type="button" onclick="resetSolarSystem()">üîÑ Reset</button>
                    <div class="speed-control">
                        <label>Speed: <span id="speed-value">1x</span></label>
                        <input type="range" id="speed-slider" min="0.1" max="3" step="0.1" value="1">
                    </div>
                </div>
            </div>

            <!-- Earth's Layers Interactive Model -->
            <div class="experiment-station">
                <h3><span class="section-icon">üåç</span>Earth's Layers Interactive Model</h3>
                <div class="earth-model-container">
                    <div class="earth-cross-section" id="earth-model">
                        <div class="layer crust" onclick="showLayerInfo('crust')">
                            <span class="layer-label">Crust</span>
                        </div>
                        <div class="layer mantle" onclick="showLayerInfo('mantle')">
                            <span class="layer-label">Mantle</span>
                        </div>
                        <div class="layer outer-core" onclick="showLayerInfo('outer-core')">
                            <span class="layer-label">Outer Core</span>
                        </div>
                        <div class="layer inner-core" onclick="showLayerInfo('inner-core')">
                            <span class="layer-label">Inner Core</span>
                        </div>
                    </div>
                    <div class="layer-info" id="layer-info">
                        <h4>Earth's Layers</h4>
                        <p>Click on any layer to learn about its properties and composition.</p>
                        <div id="layer-details"></div>
                    </div>
                </div>
            </div>

            <!-- Moon Phases Simulator -->
            <div class="experiment-station">
                <h3><span class="section-icon">üåô</span>Moon Phases Simulator</h3>
                <div class="moon-phases-container">
                    <div class="moon-simulator">
                        <div class="sun-moon">‚òÄÔ∏è</div>
                        <div class="earth-moon">üåç</div>
                        <div class="moon-orbit">
                            <div class="moon-position" id="moon-position">
                                <div class="moon-phase" id="moon-phase">üåë</div>
                            </div>
                        </div>
                        <div class="phase-display">
                            <span id="current-phase">New Moon</span>
                        </div>
                    </div>
                    <div class="moon-controls">
                        <button type="button" onclick="previousPhase()">‚Üê Previous Phase</button>
                        <button type="button" onclick="nextPhase()">Next Phase ‚Üí</button>
                        <button type="button" onclick="autoPlayPhases()">üé¨ Auto Play</button>
                    </div>
                    <div class="phases-chart">
                        <div class="phase-item" onclick="setPhase(0)">
                            <div class="phase-icon">üåë</div>
                            <span>New Moon</span>
                        </div>
                        <div class="phase-item" onclick="setPhase(1)">
                            <div class="phase-icon">üåí</div>
                            <span>Waxing Crescent</span>
                        </div>
                        <div class="phase-item" onclick="setPhase(2)">
                            <div class="phase-icon">üåì</div>
                            <span>First Quarter</span>
                        </div>
                        <div class="phase-item" onclick="setPhase(3)">
                            <div class="phase-icon">üåî</div>
                            <span>Waxing Gibbous</span>
                        </div>
                        <div class="phase-item" onclick="setPhase(4)">
                            <div class="phase-icon">üåï</div>
                            <span>Full Moon</span>
                        </div>
                        <div class="phase-item" onclick="setPhase(5)">
                            <div class="phase-icon">üåñ</div>
                            <span>Waning Gibbous</span>
                        </div>
                        <div class="phase-item" onclick="setPhase(6)">
                            <div class="phase-icon">üåó</div>
                            <span>Third Quarter</span>
                        </div>
                        <div class="phase-item" onclick="setPhase(7)">
                            <div class="phase-icon">üåò</div>
                            <span>Waning Crescent</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Weather Patterns Lab -->
            <div class="experiment-station">
                <h3><span class="section-icon">üå§Ô∏è</span>Weather Patterns Laboratory</h3>
                <div class="weather-lab">
                    <div class="weather-simulator">
                        <div class="atmosphere-layers">
                            <div class="layer troposphere">
                                <span>Troposphere</span>
                                <div class="weather-elements" id="weather-elements">
                                    <div class="cloud" style="left: 20%;">‚òÅÔ∏è</div>
                                    <div class="cloud" style="left: 60%;">‚õÖ</div>
                                </div>
                            </div>
                            <div class="layer stratosphere">
                                <span>Stratosphere</span>
                                <div class="ozone-layer">üõ°Ô∏è Ozone Layer</div>
                            </div>
                        </div>
                        <div class="earth-surface">
                            <div class="terrain mountain">üèîÔ∏è</div>
                            <div class="terrain ocean">üåä</div>
                            <div class="terrain forest">üå≤</div>
                        </div>
                    </div>
                    <div class="weather-controls">
                        <div class="weather-selector">
                            <h4>Create Weather:</h4>
                            <button type="button" onclick="createWeather('sunny')">‚òÄÔ∏è Sunny</button>
                            <button type="button" onclick="createWeather('cloudy')">‚òÅÔ∏è Cloudy</button>
                            <button type="button" onclick="createWeather('rainy')">üåßÔ∏è Rainy</button>
                            <button type="button" onclick="createWeather('stormy')">‚õàÔ∏è Stormy</button>
                            <button type="button" onclick="createWeather('snowy')">‚ùÑÔ∏è Snowy</button>
                        </div>
                        <div class="weather-info" id="weather-info">
                            <p>Select weather conditions to see how they form in different atmospheric layers.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Rock Cycle Explorer -->
            <div class="experiment-station">
                <h3><span class="section-icon">ü™®</span>Rock Cycle Explorer</h3>
                <div class="rock-cycle-container">
                    <div class="rock-cycle-diagram">
                        <div class="rock-type igneous" onclick="selectRock('igneous')">
                            <div class="rock-icon">üåã</div>
                            <span>Igneous</span>
                        </div>
                        <div class="rock-type sedimentary" onclick="selectRock('sedimentary')">
                            <div class="rock-icon">üèîÔ∏è</div>
                            <span>Sedimentary</span>
                        </div>
                        <div class="rock-type metamorphic" onclick="selectRock('metamorphic')">
                            <div class="rock-icon">üíé</div>
                            <span>Metamorphic</span>
                        </div>
                        <div class="process-arrows">
                            <div class="arrow cooling">‚ùÑÔ∏è Cooling</div>
                            <div class="arrow weathering">üåßÔ∏è Weathering</div>
                            <div class="arrow pressure">üèãÔ∏è Pressure & Heat</div>
                            <div class="arrow melting">üî• Melting</div>
                        </div>
                    </div>
                    <div class="rock-info" id="rock-info">
                        <h4>Rock Cycle</h4>
                        <p>Click on any rock type to learn about how it forms and transforms!</p>
                        <div id="rock-details"></div>
                    </div>
                </div>
            </div>

            <!-- Space Quiz Challenge -->
            <div class="experiment-station quiz-station">
                <h3><span class="section-icon">üöÄ</span>Space & Earth Knowledge Challenge</h3>
                <div class="quiz-container" id="space-quiz">
                    <div class="quiz-question" id="space-quiz-question">
                        <p>Which planet is closest to the Sun?</p>
                        <div class="quiz-options">
                            <button type="button" onclick="checkSpaceAnswer('A', true)">A) Mercury</button>
                            <button type="button" onclick="checkSpaceAnswer('B', false)">B) Venus</button>
                            <button type="button" onclick="checkSpaceAnswer('C', false)">C) Earth</button>
                            <button type="button" onclick="checkSpaceAnswer('D', false)">D) Mars</button>
                        </div>
                    </div>
                    <div class="quiz-feedback" id="space-quiz-feedback" style="display: none;"></div>
                    <div class="quiz-progress">
                        <span>Question <span id="space-question-number">1</span> of <span id="space-total-questions">6</span></span>
                        <div class="quiz-score">Score: <span id="space-quiz-score">0</span>/6</div>
                    </div>
                </div>
            </div>
        </div>
        <div class="chapter-navigation">
            <a href="chapter-2.html" class="nav-button">‚Üê Previous</a>
            <div class="progress-indicator">
                <div class="progress-text">Progress</div>
                <div class="progress-bar"><div class="progress-fill" style="width: 20%"></div></div>
            </div>
            <a href="chapter-4.html" class="nav-button">Next ‚Üí</a>
        </div>
    </main>
    <div id="footer-container"></div>
    <script src="../../js/app.js" defer></script>
    <script src="../../js/interactive.js" defer></script>
    <script>
        // Load shared components
        function loadSharedComponents() {
            fetch('../shared/header.html').then(r => r.text()).then(h => document.getElementById('header-container').innerHTML = h);
            fetch('../shared/footer.html').then(r => r.text()).then(h => document.getElementById('footer-container').innerHTML = h);
        }
        document.readyState === 'loading' ? document.addEventListener('DOMContentLoaded', loadSharedComponents) : loadSharedComponents();

        // Global variables for all interactive elements
        let solarSystemRunning = true;
        let animationSpeed = 1;
        let currentMoonPhase = 0;
        let moonPhaseTimer = null;
        let currentSpaceQuestion = 0;
        let spaceQuizScore = 0;

        // Planet data
        const planetData = {
            sun: { name: "Sun", facts: "The Sun is a star that provides light and heat to our solar system. It's about 109 times wider than Earth!" },
            mercury: { name: "Mercury", facts: "Mercury is the smallest planet and closest to the Sun. A year on Mercury is only 88 Earth days!" },
            venus: { name: "Venus", facts: "Venus is the hottest planet with surface temperatures around 900¬∞F (about 480¬∞C). It rotates backwards!" },
            earth: { name: "Earth", facts: "Earth is the only known planet with life. It has one moon and is 71% covered by water." },
            mars: { name: "Mars", facts: "Mars is called the Red Planet because of iron oxide (rust) on its surface. It has two small moons." },
            jupiter: { name: "Jupiter", facts: "Jupiter is the largest planet and has many moons. Its Great Red Spot is a storm larger than Earth!" },
            saturn: { name: "Saturn", facts: "Saturn is famous for its beautiful rings made of ice and rock. It's less dense than water!" },
            uranus: { name: "Uranus", facts: "Uranus rotates on its side and has faint rings. It's made mostly of water, methane, and ammonia." },
            neptune: { name: "Neptune", facts: "Neptune is the windiest planet with speeds over 1,000 mph. It takes 165 Earth years to orbit the Sun!" }
        };

        // Earth layer data
        const layerData = {
            crust: {
                name: "Crust",
                description: "The thin outer shell of Earth where we live. It's 5-70 km thick and made of solid rock.",
                facts: "The crust is thinnest under oceans and thickest under mountains. It contains all the soil where plants grow!"
            },
            mantle: {
                name: "Mantle",
                description: "The thick layer of hot, dense rock beneath the crust. It's about 2,900 km thick.",
                facts: "The mantle is so hot that rock flows like thick honey! This movement causes earthquakes and volcanoes."
            },
            "outer-core": {
                name: "Outer Core",
                description: "A layer of liquid iron and nickel about 2,300 km thick.",
                facts: "The liquid outer core creates Earth's magnetic field that protects us from harmful space radiation!"
            },
            "inner-core": {
                name: "Inner Core",
                description: "The solid center of Earth made of iron and nickel. It's as hot as the Sun's surface!",
                facts: "Despite being 5,000¬∞C hot, the inner core is solid because of extreme pressure. It's about the size of the Moon!"
            }
        };

        // Moon phases data
        const moonPhases = [
            { name: "New Moon", icon: "üåë", description: "The Moon is between Earth and Sun. We can't see it from Earth." },
            { name: "Waxing Crescent", icon: "üåí", description: "A small sliver of the Moon becomes visible on the right side." },
            { name: "First Quarter", icon: "üåì", description: "Half of the Moon is visible on the right side." },
            { name: "Waxing Gibbous", icon: "üåî", description: "More than half of the Moon is visible and growing." },
            { name: "Full Moon", icon: "üåï", description: "The entire Moon is visible and fully illuminated." },
            { name: "Waning Gibbous", icon: "üåñ", description: "More than half visible but shrinking on the left side." },
            { name: "Third Quarter", icon: "üåó", description: "Half of the Moon is visible on the left side." },
            { name: "Waning Crescent", icon: "üåò", description: "A small sliver visible on the left side, shrinking." }
        ];

        // Rock cycle data
        const rockData = {
            igneous: {
                name: "Igneous Rock",
                description: "Rocks formed from cooled magma or lava from volcanoes.",
                examples: "Granite, Obsidian, Basalt",
                formation: "When molten rock (magma) cools and hardens, either underground or on Earth's surface."
            },
            sedimentary: {
                name: "Sedimentary Rock",
                description: "Rocks formed from layers of sediment pressed together over millions of years.",
                examples: "Sandstone, Limestone, Shale",
                formation: "Tiny pieces of rock, sand, and organic matter pile up in layers and get compressed."
            },
            metamorphic: {
                name: "Metamorphic Rock",
                description: "Rocks changed by intense heat and pressure deep in Earth.",
                examples: "Marble, Slate, Quartzite",
                formation: "Existing rocks are transformed by heat and pressure without melting completely."
            }
        };

        // Space quiz questions
        const spaceQuestions = [
            {
                question: "Which planet is closest to the Sun?",
                options: ["A) Mercury", "B) Venus", "C) Earth", "D) Mars"],
                correct: 0,
                explanation: "Mercury is the closest planet to the Sun and completes an orbit in just 88 Earth days."
            },
            {
                question: "What causes the Moon's phases?",
                options: ["A) Earth's shadow", "B) The Moon's position relative to Earth and Sun", "C) Clouds on the Moon", "D) The Moon spinning"],
                correct: 1,
                explanation: "Moon phases are caused by the Moon's changing position as it orbits Earth, changing how much sunlight we see reflected."
            },
            {
                question: "Which layer of Earth is the thickest?",
                options: ["A) Crust", "B) Mantle", "C) Outer Core", "D) Inner Core"],
                correct: 1,
                explanation: "The mantle is by far the thickest layer, making up about 84% of Earth's volume."
            },
            {
                question: "What type of rock forms from cooled lava?",
                options: ["A) Sedimentary", "B) Metamorphic", "C) Igneous", "D) Limestone"],
                correct: 2,
                explanation: "Igneous rocks form when molten rock (magma or lava) cools and solidifies."
            },
            {
                question: "Which planet has the most visible rings?",
                options: ["A) Jupiter", "B) Saturn", "C) Uranus", "D) Neptune"],
                correct: 1,
                explanation: "Saturn has the most prominent and visible ring system, made of ice and rock particles."
            },
            {
                question: "What creates Earth's magnetic field?",
                options: ["A) The crust", "B) The mantle", "C) The liquid outer core", "D) The atmosphere"],
                correct: 2,
                explanation: "Earth's magnetic field is created by the movement of liquid iron in the outer core."
            }
        ];

        // Initialize all systems when page loads
        document.addEventListener('DOMContentLoaded', function() {
            initializeSolarSystem();
            initializeMoonPhases();
            initializeSpaceQuiz();
            startSolarSystemAnimation();
        });

        // Solar System Functions
        function initializeSolarSystem() {
            // Add click listeners to planets
            Object.keys(planetData).forEach(planetId => {
                const element = document.getElementById(planetId);
                if (element) {
                    element.addEventListener('click', () => showPlanetInfo(planetId));
                    element.style.cursor = 'pointer';
                }
            });

            // Speed control
            document.getElementById('speed-slider').addEventListener('input', function() {
                animationSpeed = parseFloat(this.value);
                document.getElementById('speed-value').textContent = animationSpeed + 'x';
            });
        }

        function startSolarSystemAnimation() {
            const planets = document.querySelectorAll('.planet, .moon');
            
            function animate() {
                if (solarSystemRunning) {
                    planets.forEach((planet, index) => {
                        const speed = animationSpeed * (0.5 + index * 0.2);
                        const currentRotation = parseFloat(planet.style.getPropertyValue('--rotation') || 0);
                        const newRotation = (currentRotation + speed) % 360;
                        planet.style.setProperty('--rotation', newRotation + 'deg');
                    });
                }
                requestAnimationFrame(animate);
            }
            animate();
        }

        function showPlanetInfo(planetId) {
            const planet = planetData[planetId];
            const detailsDiv = document.getElementById('planet-details');
            detailsDiv.innerHTML = `
                <h5>${planet.name}</h5>
                <p>${planet.facts}</p>
            `;
        }

        function toggleAnimation() {
            solarSystemRunning = !solarSystemRunning;
        }

        function resetSolarSystem() {
            const planets = document.querySelectorAll('.planet, .moon');
            planets.forEach(planet => {
                planet.style.setProperty('--rotation', '0deg');
            });
        }

        // Earth Layers Functions
        function showLayerInfo(layerId) {
            const layer = layerData[layerId];
            const detailsDiv = document.getElementById('layer-details');
            detailsDiv.innerHTML = `
                <h5>${layer.name}</h5>
                <p><strong>Description:</strong> ${layer.description}</p>
                <p><strong>Fun Facts:</strong> ${layer.facts}</p>
            `;
        }

        // Moon Phases Functions
        function initializeMoonPhases() {
            updateMoonPhase();
        }

        function updateMoonPhase() {
            const phase = moonPhases[currentMoonPhase];
            document.getElementById('moon-phase').textContent = phase.icon;
            document.getElementById('current-phase').textContent = phase.name;
            
            // Update position
            const angle = (currentMoonPhase / 8) * 360;
            document.getElementById('moon-position').style.transform = `rotate(${angle}deg)`;
        }

        function nextPhase() {
            currentMoonPhase = (currentMoonPhase + 1) % 8;
            updateMoonPhase();
        }

        function previousPhase() {
            currentMoonPhase = (currentMoonPhase - 1 + 8) % 8;
            updateMoonPhase();
        }

        function setPhase(phaseIndex) {
            currentMoonPhase = phaseIndex;
            updateMoonPhase();
        }

        function autoPlayPhases() {
            if (moonPhaseTimer) {
                clearInterval(moonPhaseTimer);
                moonPhaseTimer = null;
            } else {
                moonPhaseTimer = setInterval(nextPhase, 1000);
            }
        }

        // Weather Functions
        function createWeather(weatherType) {
            const weatherElements = document.getElementById('weather-elements');
            const weatherInfo = document.getElementById('weather-info');
            
            // Clear existing weather
            weatherElements.innerHTML = '';
            
            const weatherConfigs = {
                sunny: {
                    elements: ['‚òÄÔ∏è'],
                    info: "Clear skies form when high pressure systems push clouds away, creating sunny conditions."
                },
                cloudy: {
                    elements: ['‚òÅÔ∏è', '‚òÅÔ∏è', '‚õÖ'],
                    info: "Clouds form when water vapor in the air condenses around tiny particles in the troposphere."
                },
                rainy: {
                    elements: ['üåßÔ∏è', '‚òÅÔ∏è', 'üíß'],
                    info: "Rain occurs when water droplets in clouds become too heavy and fall due to gravity."
                },
                stormy: {
                    elements: ['‚õàÔ∏è', '‚ö°', 'üåßÔ∏è'],
                    info: "Thunderstorms form when warm, moist air rises rapidly, creating towering cumulonimbus clouds."
                },
                snowy: {
                    elements: ['‚ùÑÔ∏è', '‚òÅÔ∏è', 'üå®Ô∏è'],
                    info: "Snow forms when water vapor freezes directly into ice crystals in below-freezing temperatures."
                }
            };
            
            const config = weatherConfigs[weatherType];
            config.elements.forEach((element, index) => {
                const weatherDiv = document.createElement('div');
                weatherDiv.textContent = element;
                weatherDiv.className = 'weather-element';
                weatherDiv.style.left = (20 + index * 25) + '%';
                weatherDiv.style.animationDelay = (index * 0.5) + 's';
                weatherElements.appendChild(weatherDiv);
            });
            
            weatherInfo.innerHTML = `<p><strong>${weatherType.charAt(0).toUpperCase() + weatherType.slice(1)} Weather:</strong> ${config.info}</p>`;
        }

        // Rock Cycle Functions
        function selectRock(rockType) {
            const rock = rockData[rockType];
            const detailsDiv = document.getElementById('rock-details');
            detailsDiv.innerHTML = `
                <h5>${rock.name}</h5>
                <p><strong>Description:</strong> ${rock.description}</p>
                <p><strong>How it forms:</strong> ${rock.formation}</p>
                <p><strong>Examples:</strong> ${rock.examples}</p>
            `;
        }

        // Space Quiz Functions
        function initializeSpaceQuiz() {
            loadSpaceQuestion();
        }

        function loadSpaceQuestion() {
            if (currentSpaceQuestion >= spaceQuestions.length) {
                showSpaceResults();
                return;
            }
            
            const question = spaceQuestions[currentSpaceQuestion];
            document.getElementById('space-quiz-question').innerHTML = `
                <p>${question.question}</p>
                <div class="quiz-options">
                    ${question.options.map((option, index) => 
                        `<button type="button" onclick="checkSpaceAnswer(${index}, ${index === question.correct})">${option}</button>`
                    ).join('')}
                </div>
            `;
            
            document.getElementById('space-question-number').textContent = currentSpaceQuestion + 1;
            document.getElementById('space-quiz-feedback').style.display = 'none';
        }

        function checkSpaceAnswer(selectedIndex, isCorrect) {
            const question = spaceQuestions[currentSpaceQuestion];
            const feedback = document.getElementById('space-quiz-feedback');
            
            if (isCorrect) {
                spaceQuizScore++;
                feedback.innerHTML = `<div class="correct">‚úÖ Correct! ${question.explanation}</div>`;
            } else {
                feedback.innerHTML = `<div class="incorrect">‚ùå Incorrect. ${question.explanation}</div>`;
            }
            
            feedback.style.display = 'block';
            document.getElementById('space-quiz-score').textContent = spaceQuizScore;
            
            // Disable buttons
            document.querySelectorAll('#space-quiz-question .quiz-options button').forEach(btn => btn.disabled = true);
            
            // Auto-advance after 3 seconds
            setTimeout(() => {
                currentSpaceQuestion++;
                loadSpaceQuestion();
            }, 3000);
        }

        function showSpaceResults() {
            const percentage = Math.round((spaceQuizScore / spaceQuestions.length) * 100);
            const resultMessage = percentage >= 80 ? 
                "üéâ Amazing! You're a space expert!" :
                percentage >= 60 ? 
                "üëç Great job! You know a lot about space and Earth!" :
                "üìö Keep exploring! Try the interactive models to learn more.";
            
            document.getElementById('space-quiz-question').innerHTML = `
                <div class="quiz-complete">
                    <h3>Quiz Complete!</h3>
                    <p>Your Score: ${spaceQuizScore}/${spaceQuestions.length} (${percentage}%)</p>
                    <p>${resultMessage}</p>
                    <button type="button" onclick="restartSpaceQuiz()">Take Quiz Again</button>
                </div>
            `;
        }

        function restartSpaceQuiz() {
            currentSpaceQuestion = 0;
            spaceQuizScore = 0;
            document.getElementById('space-quiz-score').textContent = '0';
            loadSpaceQuestion();
        }
    </script>
    
    <style>
        /* Earth & Space Interactive Styles */
        .experiment-station {
            background: linear-gradient(135deg, #f8f9fa 0%, #e8f0fe 100%);
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            border: 2px solid #1976d2;
            box-shadow: 0 4px 15px rgba(25, 118, 210, 0.1);
        }

        /* Solar System Styles */
        .solar-system-container {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 20px;
            margin-top: 15px;
        }

        .solar-system {
            position: relative;
            width: 100%;
            height: 400px;
            background: radial-gradient(circle, #000428 0%, #004e92 100%);
            border-radius: 15px;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .sun {
            position: absolute;
            font-size: 3rem;
            z-index: 10;
            cursor: pointer;
            animation: pulse 2s infinite;
        }

        .orbit {
            position: absolute;
            border: 1px dashed rgba(255,255,255,0.3);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: flex-start;
        }

        .mercury-orbit { width: 80px; height: 80px; }
        .venus-orbit { width: 100px; height: 100px; }
        .earth-orbit { width: 130px; height: 130px; }
        .mars-orbit { width: 160px; height: 160px; }
        .jupiter-orbit { width: 200px; height: 200px; }
        .saturn-orbit { width: 240px; height: 240px; }
        .uranus-orbit { width: 280px; height: 280px; }
        .neptune-orbit { width: 320px; height: 320px; }

        .planet {
            font-size: 1.5rem;
            cursor: pointer;
            transition: transform 0.3s ease;
            transform-origin: center;
            animation: orbit 20s linear infinite;
        }

        .planet:hover {
            transform: scale(1.3);
        }

        .moon {
            position: absolute;
            font-size: 1rem;
            animation: moon-orbit 5s linear infinite;
            transform-origin: 20px 0;
        }

        @keyframes orbit {
            from { transform: rotate(0deg) translateX(40px) rotate(0deg); }
            to { transform: rotate(360deg) translateX(40px) rotate(-360deg); }
        }

        @keyframes moon-orbit {
            from { transform: rotate(0deg) translateX(25px) rotate(0deg); }
            to { transform: rotate(360deg) translateX(25px) rotate(-360deg); }
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .planet-info {
            background: white;
            border-radius: 10px;
            padding: 20px;
            min-height: 200px;
        }

        .solar-system-controls {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-top: 15px;
            flex-wrap: wrap;
        }

        .speed-control {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* Earth Layers Styles */
        .earth-model-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 15px;
        }

        .earth-cross-section {
            position: relative;
            width: 300px;
            height: 300px;
            border-radius: 50%;
            margin: 0 auto;
            cursor: pointer;
            overflow: hidden;
        }

        .layer {
            position: absolute;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .layer:hover {
            transform: scale(1.05);
            box-shadow: 0 0 20px rgba(255,255,255,0.8);
        }

        .crust {
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, #8B4513, #D2691E);
            border: 3px solid #654321;
        }

        .mantle {
            width: 85%;
            height: 85%;
            background: linear-gradient(45deg, #FF4500, #FF6347);
            top: 7.5%;
            left: 7.5%;
        }

        .outer-core {
            width: 50%;
            height: 50%;
            background: linear-gradient(45deg, #FFD700, #FFA500);
            top: 25%;
            left: 25%;
        }

        .inner-core {
            width: 25%;
            height: 25%;
            background: linear-gradient(45deg, #C0C0C0, #DCDCDC);
            top: 37.5%;
            left: 37.5%;
        }

        .layer-label {
            font-size: 12px;
            font-weight: bold;
            color: white;
            text-shadow: 1px 1px 2px black;
        }

        .layer-info {
            background: white;
            border-radius: 10px;
            padding: 20px;
        }

        /* Moon Phases Styles */
        .moon-phases-container {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-top: 15px;
        }

        .moon-simulator {
            position: relative;
            width: 300px;
            height: 300px;
            background: linear-gradient(circle, #000428 0%, #004e92 100%);
            border-radius: 50%;
            margin: 0 auto 20px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .sun-moon {
            position: absolute;
            top: 20px;
            left: 20px;
            font-size: 1.5rem;
        }

        .earth-moon {
            font-size: 2rem;
            z-index: 5;
        }

        .moon-orbit {
            position: absolute;
            width: 200px;
            height: 200px;
            border: 1px dashed rgba(255,255,255,0.3);
            border-radius: 50%;
        }

        .moon-position {
            position: absolute;
            top: -15px;
            left: 50%;
            transform-origin: 0 115px;
            transition: transform 0.5s ease;
        }

        .moon-phase {
            font-size: 1.8rem;
            transform: translateX(-50%);
        }

        .phase-display {
            text-align: center;
            margin-top: 10px;
            font-weight: bold;
            color: white;
        }

        .moon-controls {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 15px 0;
        }

        .phases-chart {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin-top: 15px;
        }

        .phase-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .phase-item:hover {
            border-color: #1976d2;
            background: #f0f8ff;
        }

        .phase-icon {
            font-size: 1.5rem;
            margin-bottom: 5px;
        }

        /* Weather Lab Styles */
        .weather-lab {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-top: 15px;
        }

        .weather-simulator {
            position: relative;
            height: 300px;
            background: linear-gradient(to bottom, #87CEEB 0%, #98FB98 50%, #8FBC8F 100%);
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 15px;
        }

        .atmosphere-layers {
            position: absolute;
            width: 100%;
            height: 70%;
        }

        .atmosphere-layers .layer {
            position: relative;
            width: 100%;
            padding: 10px;
            color: white;
            font-weight: bold;
            text-shadow: 1px 1px 2px black;
        }

        .troposphere {
            height: 60%;
            background: linear-gradient(to bottom, rgba(135,206,235,0.8), rgba(152,251,152,0.6));
        }

        .stratosphere {
            height: 40%;
            background: linear-gradient(to bottom, rgba(25,25,112,0.8), rgba(135,206,235,0.6));
        }

        .weather-elements {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
        }

        .weather-element {
            position: absolute;
            font-size: 1.5rem;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        .ozone-layer {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 0.9rem;
        }

        .earth-surface {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 30%;
            display: flex;
            align-items: end;
        }

        .terrain {
            flex: 1;
            text-align: center;
            font-size: 2rem;
        }

        .weather-controls {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 20px;
        }

        .weather-selector {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            align-items: center;
        }

        .weather-selector h4 {
            width: 100%;
            margin: 0 0 10px 0;
        }

        .weather-selector button {
            padding: 8px 12px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            transition: transform 0.2s ease;
        }

        .weather-selector button:hover {
            transform: translateY(-2px);
        }

        /* Rock Cycle Styles */
        .rock-cycle-container {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-top: 15px;
        }

        .rock-cycle-diagram {
            position: relative;
            width: 100%;
            height: 300px;
            background: linear-gradient(45deg, #F5F5DC, #DEB887);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: space-around;
            margin-bottom: 20px;
        }

        .rock-type {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            background: white;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 3px solid;
            min-width: 100px;
        }

        .rock-type:hover {
            transform: scale(1.1);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .igneous {
            border-color: #FF4500;
            background: linear-gradient(45deg, #FFE4E1, #FFA07A);
        }

        .sedimentary {
            border-color: #8B7355;
            background: linear-gradient(45deg, #F5DEB3, #D2B48C);
        }

        .metamorphic {
            border-color: #4B0082;
            background: linear-gradient(45deg, #E6E6FA, #DDA0DD);
        }

        .rock-icon {
            font-size: 2rem;
            margin-bottom: 8px;
        }

        .process-arrows {
            position: absolute;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }

        .arrow {
            position: absolute;
            font-size: 0.8rem;
            background: rgba(255,255,255,0.9);
            padding: 5px 8px;
            border-radius: 15px;
            border: 1px solid #333;
        }

        .rock-info {
            min-height: 150px;
        }

        /* Quiz Styles */
        .quiz-station {
            border-color: #7b1fa2;
            background: linear-gradient(135deg, #f8f9fa 0%, #f3e5f5 100%);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .solar-system-container {
                grid-template-columns: 1fr;
            }
            
            .earth-model-container {
                grid-template-columns: 1fr;
            }
            
            .earth-cross-section {
                width: 250px;
                height: 250px;
            }
            
            .phases-chart {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .weather-controls {
                grid-template-columns: 1fr;
            }
            
            .rock-cycle-diagram {
                flex-direction: column;
                height: auto;
                padding: 20px;
            }
        }
    </style>
</body>
</html>
