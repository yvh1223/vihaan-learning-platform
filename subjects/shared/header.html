<!-- Shared Navigation Header Component -->
<!-- Used across all subject and chapter pages for consistent navigation -->

<header class="main-header" aria-label="Main site header">
    <a class="skip-link" href="#main-content">Skip to main content</a>
    <nav class="navbar" aria-label="Primary navigation">
        <div class="nav-brand">
            <a href="../../index.html" class="brand-link">
                <img src="../../assets/icons/logo.svg" alt="Learning Platform Logo" class="logo">
                <h1>5th Grade Learning Hub</h1>
            </a>
        </div>
        
        <!-- Main Navigation Menu -->
        <div class="nav-menu" id="nav-menu">
            <ul class="nav-list">
                <li><a href="../../index.html" class="nav-link" data-nav="dashboard">
                    <span class="nav-icon">üè†</span>Dashboard
                </a></li>
                <li><a href="../mathematics/index.html" class="nav-link" data-nav="mathematics">
                    <span class="nav-icon">üî¢</span>Mathematics
                </a></li>
                <li><a href="../science/index.html" class="nav-link" data-nav="science">
                    <span class="nav-icon">üî¨</span>Science
                </a></li>
                <li><a href="../english/index.html" class="nav-link" data-nav="english">
                    <span class="nav-icon">üìö</span>English Language Arts
                </a></li>
                <li><a href="../social-studies/index.html" class="nav-link" data-nav="social-studies">
                    <span class="nav-icon">üåç</span>Social Studies
                </a></li>
            </ul>
        </div>
        
        <!-- Navigation Controls -->
        <div class="nav-controls">
            <button type="button" id="theme-toggle" class="btn-icon" aria-label="Toggle theme">üåô</button>
            <button type="button" id="text-size-toggle" class="btn-icon" aria-label="Increase text size" aria-pressed="false">A+</button>
            <button type="button" id="menu-toggle" class="btn-icon mobile-only" aria-label="Toggle menu">‚ò∞</button>
        </div>
    </nav>
    
    <!-- Breadcrumb Navigation (context-aware, populated by JavaScript) -->
    <div class="breadcrumb-container" id="breadcrumb-container" style="display: none;">
        <nav class="breadcrumb" aria-label="Breadcrumb navigation">
            <ol class="breadcrumb-list" id="breadcrumb-list">
                <!-- Dynamically populated by navigation.js -->
            </ol>
        </nav>
    </div>
</header>

<style>
/* Shared Header Styles - Extends main.css */
.skip-link {
    position: absolute;
    left: -999px;
    top: auto;
    width: 1px;
    height: 1px;
    overflow: hidden;
}
.skip-link:focus {
    left: 16px;
    top: 16px;
    width: auto;
    height: auto;
    background: #000;
    color: #fff;
    padding: 8px 12px;
    border-radius: 6px;
    z-index: 10000;
}
.brand-link {
    display: flex;
    align-items: center;
    gap: var(--spacing-md);
    text-decoration: none;
    color: inherit;
}

.brand-link:hover h1 {
    color: var(--primary-hover);
}

.nav-icon {
    font-size: var(--font-size-lg);
    margin-right: var(--spacing-xs);
}

.nav-link {
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
}

/* Breadcrumb Styles */
.breadcrumb-container {
    background-color: var(--bg-secondary);
    border-bottom: 1px solid var(--bg-accent);
    padding: var(--spacing-sm) var(--spacing-xl);
}

.breadcrumb-list {
    display: flex;
    align-items: center;
    list-style: none;
    gap: var(--spacing-sm);
    font-size: var(--font-size-sm);
}

.breadcrumb-item {
    display: flex;
    align-items: center;
}

.breadcrumb-item:not(:last-child)::after {
    content: "‚Ä∫";
    margin-left: var(--spacing-sm);
    color: var(--text-secondary);
    font-weight: bold;
}

.breadcrumb-link {
    color: var(--primary-color);
    text-decoration: none;
    transition: color var(--transition-fast);
}

.breadcrumb-link:hover {
    color: var(--primary-hover);
    text-decoration: underline;
}

.breadcrumb-current {
    color: var(--text-primary);
    font-weight: 500;
}

/* Mobile breadcrumb adjustments */
@media (max-width: 767px) {
    .breadcrumb-container {
        padding: var(--spacing-xs) var(--spacing-md);
    }
    
    .breadcrumb-list {
        font-size: var(--font-size-xs);
        gap: var(--spacing-xs);
    }
    
    .breadcrumb-item:not(:last-child)::after {
        margin-left: var(--spacing-xs);
    }
}
</style>

<script>
// Shared Header JavaScript for Navigation Context
(function() {
    // Initialize header navigation context
    function initializeHeaderNavigation() {
        updateActiveNavigation();
        updateBreadcrumbs();
        ensureMainLandmark();
    }
    
    // Update active navigation based on current page
    function updateActiveNavigation() {
        const currentPath = window.location.pathname;
        const navLinks = document.querySelectorAll('.nav-link');
        
        // Remove all active classes
        navLinks.forEach(link => link.classList.remove('active'));
        
        // Determine current section and mark as active
        if (currentPath.includes('/subjects/mathematics/')) {
            document.querySelector('[data-nav="mathematics"]')?.classList.add('active');
        } else if (currentPath.includes('/subjects/science/')) {
            document.querySelector('[data-nav="science"]')?.classList.add('active');
        } else if (currentPath.includes('/subjects/english/')) {
            document.querySelector('[data-nav="english"]')?.classList.add('active');
        } else if (currentPath.includes('/subjects/social-studies/')) {
            document.querySelector('[data-nav="social-studies"]')?.classList.add('active');
        } else if (currentPath === '/' || currentPath.endsWith('index.html')) {
            document.querySelector('[data-nav="dashboard"]')?.classList.add('active');
        }
    }

    // Ensure there is a main landmark with a consistent ID for skip link
    function ensureMainLandmark() {
        const mainEl = document.querySelector('main');
        if (mainEl && !mainEl.id) {
            mainEl.id = 'main-content';
        }
    }
    
    // Update breadcrumb navigation based on current page context
    function updateBreadcrumbs() {
        const currentPath = window.location.pathname;
        const breadcrumbContainer = document.getElementById('breadcrumb-container');
        const breadcrumbList = document.getElementById('breadcrumb-list');
        
        // Clear existing breadcrumbs
        breadcrumbList.innerHTML = '';
        
        // Always start with Dashboard
        const dashboardCrumb = createBreadcrumbItem('üè† Dashboard', '../../index.html');
        breadcrumbList.appendChild(dashboardCrumb);
        
        // Add subject-specific breadcrumbs
        if (currentPath.includes('/subjects/')) {
            const pathParts = currentPath.split('/');
            const subject = pathParts.find(part => part.includes('mathematics') || part.includes('science') || part.includes('english') || part.includes('social-studies'));
            const fileName = pathParts[pathParts.length - 1];
            
            if (subject) {
                const subjectNames = {
                    'mathematics': 'Mathematics',
                    'science': 'Science', 
                    'english': 'English Language Arts',
                    'social-studies': 'Social Studies'
                };
                
                const subjectCrumb = createBreadcrumbItem(
                    subjectNames[subject], 
                    `../${subject}/index.html`
                );
                breadcrumbList.appendChild(subjectCrumb);
                
                // Add chapter/assessment breadcrumb if not on subject index
                if (fileName !== 'index.html') {
                    const pageName = getPageDisplayName(fileName);
                    const currentCrumb = createBreadcrumbItem(pageName, null, true);
                    breadcrumbList.appendChild(currentCrumb);
                }
                
                // Show breadcrumb container
                breadcrumbContainer.style.display = 'block';
            }
        } else {
            // Hide breadcrumbs on dashboard
            breadcrumbContainer.style.display = 'none';
        }
    }
    
    // Create breadcrumb item element
    function createBreadcrumbItem(text, href, isCurrent = false) {
        const li = document.createElement('li');
        li.className = 'breadcrumb-item';
        
        if (isCurrent || !href) {
            li.innerHTML = `<span class="breadcrumb-current">${text}</span>`;
        } else {
            li.innerHTML = `<a href="${href}" class="breadcrumb-link">${text}</a>`;
        }
        
        return li;
    }
    
    // Get display name for page based on filename
    function getPageDisplayName(fileName) {
        const pageNames = {
            'chapter-1.html': 'Chapter 1',
            'chapter-2.html': 'Chapter 2', 
            'chapter-3.html': 'Chapter 3',
            'chapter-4.html': 'Chapter 4',
            'chapter-5.html': 'Chapter 5',
            'assessment-1.html': 'Practice Assessment'
        };
        
        return pageNames[fileName] || fileName.replace('.html', '').replace('-', ' ');
    }
    
    // Mobile menu toggle functionality
    function initializeMobileMenu() {
        const menuToggle = document.getElementById('menu-toggle');
        const navMenu = document.getElementById('nav-menu');
        
        if (menuToggle && navMenu) {
            menuToggle.addEventListener('click', () => {
                navMenu.classList.toggle('active');
            });
        }
    }
    
    // Initialize when DOM is loaded
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', () => {
            initializeHeaderNavigation();
            initializeMobileMenu();
        });
    } else {
        initializeHeaderNavigation();
        initializeMobileMenu();
    }
})();
</script>
